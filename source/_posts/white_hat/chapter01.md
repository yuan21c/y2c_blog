---
title: 《白帽子讲 Web 安全》 第一章 我的安全世界观
date: 2022-09-16 14:58:51
updated: 2022-09-16 14:58:51
categories: 白帽子讲 Web 安全
tags:
    - hacker
    - white hat
    - security
    - web
description:
top_img: https://iili.io/iJ2HCb.jpg
cover: https://iili.io/iHsUiX.jpg
---

**互联网本来是安全的，自从有了研究安全的人之后，互联网就变得不安全了。**

## Web 安全简史

起初，研究计算机系统和网络的人，被称为 ***Hacker ( 黑客 )*** 。

黑客们的目标：获取系统最高权限( root / administrator ) 。

两种黑客：

+ 精通计算机技术，能自己挖掘漏洞并编写 exploit (黑客们编写的能够利用漏洞的代码);
+ 对计算机原理和各种编程技术理解比较粗浅，只懂得利用别人编写的代码、工具、脚本，他们被称为 ***Script Kids ( 脚本小子 )***

在现实世界中，真正造成破坏的往往是这些脚本小子。

### 中国黑客简史

+ 启蒙时代

    大概处在 20 世纪 90 年代

+ 黄金时代

    以中美黑客大战为标志

+ 黑暗时代

    从中美黑客大战之后

### 黑客技术的发展历程

+ 黑客目标是系统软件

+ 黑客的目标是网络、操作系统、软件等领域

+ Web 越来越流行，黑客们的目标也开始转向 web

### Web 安全的兴起

+ 动态脚本
+ SQL 注入
+ XSS 跨站脚本攻击

## 黑帽子和白帽子

+ 黑帽子

    利用黑客技术造成破坏，甚至进行网络犯罪的群体。

    只要找到系统的一个弱点，就可以达到入侵的目的。

    只要以点突破，出发点是选择性的、微观的。

    组合不同的漏洞以达到入侵的目的。

+ 白帽子

    工作在反黑客领域的专家们。

    必须找到系统的所有弱点，不能有任何遗漏，才能保证系统不出问题。

    要解决所有的安全问题，所看所想要求更加全面、宏观。

    必须分解问题后逐个解决。

| 黑帽子                                         | 白帽子                                                         |
| ---------------------------------------------- | -------------------------------------------------------------- |
| 利用黑客技术造成破坏，甚至进行网络犯罪的群体。 | 工作在反黑客领域的专家们。                                     |
| 只要找到系统的一个弱点，就可以达到入侵的目的。 | 必须找到系统的所有弱点，不能有任何遗漏，才能保证系统不出问题。 |
| 只要以点突破，出发点是选择性的、微观的。       | 要解决所有的安全问题，所看所想要求更加全面、宏观。             |
| 组合不同的漏洞以达到入侵的目的。               | 必须分解问题后逐个解决。                                       |

破坏永远比建设容易。

No Patch For Stupid.

最大的漏洞就是人！

## 返璞归真，揭密安全的本质

**安全的本质是信任问题。**

被划分出来的具有不同信任级别的区域，称为 ***信任域***。

划分两个信任域之间的边界，称为 ***信任边界***。

数据从高等级的信任域流向低等级的信任域，是不需要经过安全检查的;

数据从低等级的信任域流向高等级的信任域，则需要经过信任边界的安全检查。

## 破除迷信，没有银弹

**安全是一个持续的过程。**

## 安全三要素

+ 机密性

    要求保护数据内容不能泄漏，加密是实现机密性要求的常见手段。

+ 完整性

    要求保护数据内容是完整的、没有被篡改的。常见的保证一致性的技术手段是数字签名。

+ 可用性

    要求保护资源是 “随需而得” 的。

## 如何实施安全评估

{% mermaid %}
graph TD
    资产等级划分 --> 威胁分析;
    威胁分析 --> 风险分析;
    风险分析 --> 确认解决方案;
{% endmermaid %}

### 资产等级划分

互联网安全的核心问题，是数据安全问题。

### 威胁分析

可能造成伤害的来源称为 ***威胁 (Threat)***

可能会出现的损失称为 ***风险 (Risk)***

威胁分析的方法：

+ 头脑风暴
+ 使用模型

STRIDE 模型

| 威胁| 定义 | 对应的安全属性 |
| -- | -- | -- |
| Spoofing (伪装) | 冒充他人身份 | 认证 |
| Tampering (篡改) | 修改数据或代码 | 完整性 |
| Repudiaton (抵赖) | 否认做过的事情 | 不可抵抗性 |
| InformationDisclosure (信息泄漏) | 机密信息泄漏 | 机密性 |
| Denial of Service (拒绝服务) | 拒绝服务 | 可用性 |
| Elevation of Privilege (提升权限) | 未经授权获得许可 | 授权 |

### 风险分析

风险的组成：

`Risk = Probobility * Damage Protential`

+ DREAD 模型

| 等级 | 高(3) | 中(2) | 低(1) |
| -- | -- | -- | -- |
| Damage Protetial |获取完全验证权限；执行管理员操作；非法上传文件 | 泄漏敏感信息 | 泄漏其他信息 |
| Reproducibility |攻击者可以随意再次攻击 | 攻击者可以重复攻击，但有时间限制 | 攻击者很难重复攻击过程 |
| Exploitability |初学者在短期内能掌握攻击方法 | 熟练的攻击者才能完成这次攻击 | 漏洞利用条件非常苛刻 |
| Affected users |所有用户，默认配置，关键用户 | 部分用户，非默认配置 | 极少数用户，匿名用户 |
| Discoverability |漏洞很明显，攻击条件很容易获得 | 在私有区域，部分人能看到，需要深入挖掘 | 发现该漏洞极其困难 |

### 设计安全方案

安全是为产品的发展和成长保驾护航的。

好的安全方案对用户应该是透明的，尽可能地不要改变用户的使用习惯。

优秀的安全方案应该具备以下特点：

+ 能够有效解决问题；
+ 用户体验好；
+ 高性能；
+ 低耦合；
+ 易于扩展与升级。

## 白帽子兵法

### Secure By Default 原则

#### 黑名单和白名单

如果更多地使用白名单，那么系统就会变得更安全。

#### 最小权限原则

**最小权限原则**要求系统只授予主体必要的权限，而不要过度授权。

### 纵深防御原则

+ 要在各个不同层面、不同方面实施安全方案，避免出现疏漏，不同安全方案之间需要互相配合，构成一个整体;

+ 要在正确的地方做正确的事情，即：在解决问题的地方实施针对性的安全方案。

### 数据与代码分离原则

**数据与代码分离原则**广泛适用于各种由于“注入”而引发的安全问题的场景。

### 不可预测性原则

**不可预测性 ( Unpredictable ) 原则**能有效对抗基于篡改、伪造的攻击。

不可预测指的是系统对于攻击者不可预测。

> 安全是一门朴素的学问，也是一种平衡的艺术。
